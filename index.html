<!DOCTYPE html><html lang="en-US"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>All posts | SPD Blog</title><meta name="description" content="Some thoughts, rendered to the world with Next.js and Tailwind.css"/><meta property="og:type" content="website"/><meta name="og:title" property="og:title" content="All posts"/><meta name="og:description" property="og:description" content="Some thoughts, rendered to the world with Next.js and Tailwind.css"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="All posts"/><meta name="twitter:description" content="Some thoughts, rendered to the world with Next.js and Tailwind.css"/><meta name="twitter:creator"/><link rel="icon" type="image/png" href="/static/favicon.ico"/><link rel="apple-touch-icon" href="/static/favicon.ico"/><meta name="next-head-count" content="13"/><link rel="preload" href="/blog/_next/static/css/d3b0ff999e614dc807d6.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/d3b0ff999e614dc807d6.css"/><link rel="preload" href="/blog/_next/static/css/bd9d9c26e848ad9998be.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/bd9d9c26e848ad9998be.css"/><link rel="preload" href="/blog/_next/static/chunks/main-3426d16b71b08bec2947.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/b59e6658.acdc88755e55ded238c8.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/commons.31bdf4c1b63891aa4bfa.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/_app-21c7a7a663f3cc7fee82.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.ff9aca2ce00f65120db1.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/index-0396a81ec8d3172950c4.js" as="script"/></head><body><div id="__next"><div class="max-w-screen-sm px-4 py-12 mx-auto antialiased font-body"><header><h1 class="mb-8"><a class="font-black leading-none text-black no-underline text-7xl font-display" href="/blog">Some Thoughts</a></h1></header><main><div class="flex items-center my-14"><img class="lazyload blur-up flex-shrink-0 mb-0 mr-3 rounded-full w-18 h-16" alt="Profile" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAAAklEQVR4AewaftIAAADySURBVE3BvU7CUACG4fccTgGLQESNkGh0cJDExcUYL8A78C7d3N2dHFz8GwwJKqQlAUtpQ8/5jIOJz2OSzw8ZazHGMHp6YHx/y/Diiq3hJUhI4pdFQBCLWcLs7obzo2N6eUIxfeePJKwQQvhiycqLte2A69LK5vxnJVAQzkTE3jJ5faGe55hmC0lIQhLWhIAQzZ1d3MkpaToimzwzJ0IhoCAIwklCgsViyeN3l25WUjZ6VM0ezjawfo2hwoUQmM49b18l+UafzbNrxlpRsx0Gtk6tFuHLAjfLCtIq5uBwQH9/j+WqxLVjttsNvKAKhsI7fgCuWoInGNIgygAAAABJRU5ErkJggg==" data-srcset="/blog/_next/static/images/profile-c2be2d422988d6577a1b39ccdb31661b.png"/><p class="text-base leading-7">Hello there! I&#x27;m <b class="font-semibold">Sean</b>,<!-- --> <!-- -->a software engineer at The Climate Service, though my background is in finance and consulting.<!-- --> <br/><a href="https://linkedin.com/in/spdolan">Connect with me on LinkedIn.</a></p></div><article><header class="mb-2"><h3 class="mb-2"><a class="text-4xl font-bold text-blue-600 font-display" href="/blog/post/postgres-fun-file-imports">Postgres Fun: Using File Import</a></h3><span class="text-sm">September 5, 2020</span></header><section><p class="mb-8 text-lg">First in PostgreSQL Series, using files to manage DB.</p></section></article><article><header class="mb-2"><h3 class="mb-2"><a class="text-4xl font-bold text-blue-600 font-display" href="/blog/post/intent">Intent</a></h3><span class="text-sm">August 30, 2020</span></header><section><p class="mb-8 text-lg">Let&#x27;s get inside, out.</p></section></article><article><header class="mb-2"><h3 class="mb-2"><a class="text-4xl font-bold text-blue-600 font-display" href="/blog/post/js-config-object">Small JS Patterns: Config Object</a></h3><span class="text-sm">August 16, 2020</span></header><section><p class="mb-8 text-lg">First in JS Patterns Series, fun use of spread operator.</p></section></article></main><footer class="text-lg font-light">Â© <!-- -->2020<!-- -->, Built with<!-- --> <a href="https://nextjs.org/">Next.js</a>ðŸ”¥</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"slug":"postgres-fun-file-imports","frontmatter":{"title":"Postgres Fun: Using File Import","date":"September 5, 2020","modified":"September 5, 2020","description":"First in PostgreSQL Series, using files to manage DB.","tags":["postgresql","fresh-dev"]},"excerpt":"","content":"\nAt The Climate Service (TCS), our relational database (DB) of choice is (PostgreSQL)[https://www.postgresql.org/] (pg). Before joining TCS, my experience had only been with NoSQL DBs, namely (MongoDB)[https://www.mongodb.com/]. It has been a journey so far to delve into everything that pg offers, I'll be sharing some of what I've found to be useful over the course of several entries.\n\n### TLDR\n\nWe are able to import DB data from files (assumes you have (Docker)[https://docs.docker.com/get-docker/]/(psql)[https://www.postgresql.org/download/] installed):\n\n- Clone and cd into this repo: `git clone XYZ \u0026\u0026 cd XYZ`\n- Start a local (pg instance with Docker)[https://hub.docker.com/_/postgres]: `docker run --name some-postgres -e POSTGRES_PASSWORD=mysecretpassword -d postgres`\n- Connect using psql: `psql -h localhost -p 5432 -U postgres -W`\n- Create a schema and tables using file import: `\\i db/schema.ddl`\n- \"Seed\" tables using file import: `\\i db/seed.sql`\n\n## Schema Management\n\nIf, like us at TCS, you employ methods like Agile/SCRUM, then your team is looking to build out feature sets through iteration. For us, as part of building \"Generation 2.0\" of our product, much of that also occurred within our DB schema, as our researchers continue to grow their own knowledge base surrounding the relationships between climate science and risk.\n\nFor the first few months, as we built out our DB schema, and tested how we modeled the relationships behind our data, we would pack everything in two files - gracefully named `schema.dll` and `seed.sql`. We had these under source control, so we could at least look back at changes to our git repository and understand the journey to now. This was due to our team's decision to not use an object-relational mapping library (such as (Sequelize)[https://sequelize.org/] or (TypeORM)[https://typeorm.io/] in relational-DB land, or an object data modeling (ODM) such as (Mongoose)[https://mongoosejs.com/] for the NoSQL-inclined) to start, to give us better flexibility while in this learning-by-doing period.\n\nIn practice this meant that any pull request (PR) with schema changes would lead to something like the following for each developer, first within one's local pg instance, subsequently as part of our build pipeline:\n\n```console\n\u003e docker start local-postgres     #restart pg container, if process had been shut down.\n\u003e psql local-postgres      #connect to docker pg instance using `psql` utility\n\u003e \\i path/to/schema.dll     #import latest/greatest DB schema from file\n\u003e \\i path/to/seed.sql       #import latest/greatest DB seed data from file\n```\n\nWhen I first started using this method, it blew my mind! Some of our more senior engineers were starting to discuss, and implement, infrastructure-as-code (IaC), but I had originally thought without the use of an ORM we'd receive DB updates through Slack and ad hoc document/update ourselves organically. Thankfully livelier minds were driving our project.\n\n## Next Steps, An Invitation to Migration\n\nAs you may have surmised, while this was great as we were ramping up, it quickly became a hinderance to have our DB - even a local Docker instance - doing its best phoenix impression whenever we added even a simple field to a table. Thankfully, our team now uses (Flyway)[https://flywaydb.org/getstarted/why] - so whenever Alice heads out on vacation, and Bob finishes his design for a time-saving DB trigger, Alice can quickly and safely update. All it takes is a `git pull` on our trunk branch, and a `flyway migrate` thereafter.\n\nMore on that to come! Does your team struggle with or have a great method for relational DB management?\n\n## That's it! Happy coding!\n"},{"slug":"intent","frontmatter":{"title":"Intent","date":"August 30, 2020","modified":"September 5, 2020","description":"Let's get inside, out.","tags":["self-accountability"]},"excerpt":"","content":"\n### I'll be writing here about building things with code, or other things that I've found to be interesting or of use.\n\n#### Upcoming writings\n\n- Using Tekton CLI\n- Small JS Patterns\n  - [x] Config Object\n- Postgres Fun\n  - [x] File Imports\n  - [ ] File Exports\n  - [ ] \"Beanstalk\" Tables\n  - [ ] Common Table Expressions\n  - [ ] Generating Tables and Triggers\n  - [ ] Methods to Soft Delete\n- Small Refactorings\n- Transition to Cypress\n- Using Cypress Commands\n"},{"slug":"js-config-object","frontmatter":{"title":"Small JS Patterns: Config Object","date":"August 16, 2020","modified":"September 5, 2020","description":"First in JS Patterns Series, fun use of spread operator.","tags":["js"]},"excerpt":"","content":"\nSharing here a quick JS pattern that I enjoy using when dealing with when representing some sort of configuration with an object.\n\n### TLDR\n\nWhen using objects, and assigning key-value pairs, placing array brackets - \\[ \\] â€“ around a variable will evaluate that variable's value instead of using the variable name.\n\n## Using Configuration Objects\n\nThis pattern is vanilla JS, so let's open up our dev tools within your favorite browser. Create an object that represents potential filters on a movie/tv show selection site:\n\n```javascript\nlet filters = {\n  category: [\"Comedy\", \"Horror\", \"Sci-fi\", \"Anime\"],\n  maxDuration: 120,\n};\n```\n\nWe'll assume there is some data list/UI present that handles the possible values available to update this object, such as in this article.\n\nLet's create a function that handles updating our filters value:\n\n```javascript\nconst handleFiltersChange = (key, newValue) =\u003e {\n  filters = {\n    ...filters,\n    [key]: newValue,\n  };\n};\n```\n\nNote handleFiltersChange accepts two parameters to facilitate updates â€“ both the key of the value to be updated and the new value. We are using the array bracket wrappers over our key values to evaluate the variable value instead of just updating our filter object with a literal 'key' value.\n\nLet's implement a counter-example without our square brackets to verify the difference:\n\n```javascript\nconst handleFiltersChangeJustKey = (key, newValue) =\u003e {\n  filters = {\n    ...filters,\n    key: newValue,\n  };\n};\n```\n\nChecking our original values persist:\n\n```console\n\u003e filters\n{\n  category: ['Comedy', 'Horror', 'Sci-fi', 'Anime'],\n  maxDuration: 120\n}\n```\n\nCalling our second function, handleFiltersChangeJustKey:\n\n```console\n\u003e handleFiltersChangeJustKey('maxDuration', 55)\n\u003e filters\n\n{\n  category: ['Comedy', 'Horror', 'Sci-fi', 'Anime'],\n  maxDuration: 120, //expressed in minutes\n  key: 55\n}\n```\n\nWell, that's not the update we were looking for... Let's try calling our first function, handleFiltersChange:\n\n```console\n\u003e handleFiltersChange ('maxDuration', 90)\n\u003e filters\n\n{\n  category: ['Comedy', 'Horror', 'Sci-fi', 'Anime'],\n  maxDuration: 90,\n  key: 55\n}\n```\n\nCalling handleFiltersChange with a more complex data structure:\n\n```console\n\u003e const newValues = ['Thriller', 'Drama', 'Romance']\n\u003e handleFiltersChange ('category', newValues)\n\u003e filters\n\n{\n  category: ['Thriller', 'Drama', 'Romance'],\n  maxDuration: 90,\n  key: 55\n}\n```\n\n## That's it! Happy coding!\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"oOI8uRw2ZM0FOAtUx6gRs","assetPrefix":"/blog","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/blog/_next/static/chunks/polyfills-9a32872f6a983227f3b1.js"></script><script src="/blog/_next/static/chunks/main-3426d16b71b08bec2947.js" async=""></script><script src="/blog/_next/static/chunks/webpack-488dc228921f1fdbc0e7.js" async=""></script><script src="/blog/_next/static/chunks/framework.a5d4ffe593e18b49243e.js" async=""></script><script src="/blog/_next/static/chunks/b59e6658.acdc88755e55ded238c8.js" async=""></script><script src="/blog/_next/static/chunks/commons.31bdf4c1b63891aa4bfa.js" async=""></script><script src="/blog/_next/static/chunks/pages/_app-21c7a7a663f3cc7fee82.js" async=""></script><script src="/blog/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.ff9aca2ce00f65120db1.js" async=""></script><script src="/blog/_next/static/chunks/pages/index-0396a81ec8d3172950c4.js" async=""></script><script src="/blog/_next/static/oOI8uRw2ZM0FOAtUx6gRs/_buildManifest.js" async=""></script><script src="/blog/_next/static/oOI8uRw2ZM0FOAtUx6gRs/_ssgManifest.js" async=""></script></body></html>